<%- include('../partials/header') %>

<div class="container mt-5 ">
  <h2 class="text-center mb-4">My Articles</h2>

  <div class="text-end mb-3">
    <a href="/blog/add" class="btn btn-success">+ Add New Article</a>
  </div>

  <div class="row" style="padding-left:200px;">
    <% if (blogs && blogs.length > 0) { %>
      <% blogs.forEach(blog => { %>
        <div class="col-md-6 mb-4">
          <div class="card shadow-sm h-100">
            
            <!-- Only show uploaded image -->
            <% if (blog.image) { %>
              <img src="/uploads/<%= blog.image %>" class="card-img-top" alt="Blog Image" style="height:200px; object-fit:cover;">
            <% } %>

            <div class="card-body">
              <h5 class="card-title"><%= blog.title %></h5>
              <p class="text-muted"><small>Created on <%= new Date(blog.createdAt).toLocaleString() %></small></p>
              <p class="card-text"><%= blog.content.substring(0, 120) %>...</p>
              
              <div class="d-flex justify-content-between">
                <a href="/blog/edit/<%= blog._id %>" class="btn btn-primary btn-sm">Edit</a>
                <form action="/blog/delete/<%= blog._id %>" method="POST" onsubmit="return confirm('Delete this article?');">
                  <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                </form>
              </div>
            </div>

          </div>
        </div>
      <% }) %>
    <% } else { %>
      <div class="col-12 text-center">
        <p class="text-muted">You havenâ€™t written any articles yet.</p>
      </div>
    <% } %>
  </div>
</div>

<%- include('../partials/footer') %>
