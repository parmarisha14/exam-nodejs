<%- include('../partials/header') %>

<div class="page-wrapper" style="padding-left: 250px; padding-top:30px;">
  <div class="container">

    <!-- Breadcrumb -->
    <div class="page-breadcrumb mb-4">
      <div class="row align-items-center">
        <div class="col-md-6">
          <h4 class="page-title">All Blogs</h4>
        </div>
        <div class="col-md-6 text-end">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb justify-content-end mb-0">
              <li class="breadcrumb-item"><a href="/dashboard">Home</a></li>
              <li class="breadcrumb-item active" aria-current="page">Blogs</li>
            </ol>
          </nav>
        </div>
      </div>
    </div>

    <!-- Blogs Table -->
    <div class="row">
      <div class="col-lg-12">
        <div class="card shadow-sm rounded">
          <div class="card-header bg-primary text-white">
            <h5 class="mb-0">Blog List</h5>
          </div>
          <div class="card-body p-3">
            <div class="table-responsive">
              <table class="table table-striped table-bordered align-middle text-center mb-0">
                <thead class="table-primary">
                  <tr>
                    <th>#</th>
                    <th>Title</th>
                    <th>Author</th>
                    <th>Content</th>
                    <th>Image</th>
                    
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <% if (blogs.length > 0) { %>
                    <% blogs.forEach((blog, index) => { %>
                      <tr>
                        <th scope="row"><%= index + 1 %></th>
                        <td><%= blog.title %></td>
                        <td><%= blog.author.username %></td>
                        <td><%= blog.content.length > 50 ? blog.content.substring(0,50) + "..." : blog.content %></td>
                        <td>
                          <% if (blog.image) { %>
                            <img src="<%= blog.image %>" alt="Blog Image" width="80" height="60">
                          <% } else { %>
                            No Image
                          <% } %>
                        </td>
                        
                        <td>
                          <a href="/blog/edit/<%= blog._id %>" class="btn btn-sm btn-warning">Edit</a>
                          <a href="/blog/delete/<%= blog._id %>" class="btn btn-sm btn-danger">Delete</a>
                        </td>
                      </tr>
                    <% }) %>
                  <% } else { %>
                    <tr>
                      <td colspan="7">No blogs found</td>
                    </tr>
                  <% } %>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<%- include('../partials/footer') %>
